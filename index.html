<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Football Game</title>
  </head>
  <body>
    <h1 style="text-align: center;">Football Game</h1>
    <div id="teambox" style="max-width: 800px; margin: auto;">
      <h2>Select Teams</h2>
      <form onsubmit="storeTeamAndStartPlay(event)">
        <div style="display: flex;">
          <div style="background: darkred; flex-grow: 1; padding: 10px;">
            <h3 style="color: white;">Your Team</h3>
            <input
              type="text"
              required
              id="team1"
              name="team1"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <h3 style="color: white;">Players</h3>
            <input
              type="text"
              required
              id="team1player1"
              name="team1player1"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team1player2"
              name="team1player2"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team1player3"
              name="team1player3"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team1player4"
              name="team1player4"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team1player5"
              name="team1player5"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team1player6"
              name="team1player6"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team1player7"
              name="team1player7"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team1player8"
              name="team1player8"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team1player9"
              name="team1player9"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team1player10"
              name="team1player10"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <h6 style="color: white;">Goal Keeper</h6>
            <input
              type="text"
              required
              id="team1player11"
              name="team1player11"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
          </div>
          <div style="background: blue; flex-grow: 1; padding: 10px;">
            <h3 style="color: white;">Computer's Team</h3>
            <input
              type="text"
              required
              id="team2"
              name="team2"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <h3 style="color: white;">Players</h3>
            <input
              type="text"
              required
              id="team2player1"
              name="team2player1"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team2player2"
              name="team2player2"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team2player3"
              name="team2player3"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team2player4"
              name="team2player4"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team2player5"
              name="team2player5"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team2player6"
              name="team2player6"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team2player7"
              name="team2player7"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team2player8"
              name="team2player8"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team2player9"
              name="team2player9"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <input
              type="text"
              required
              id="team2player10"
              name="team2player10"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
            <h6 style="color: white;">Goal Keeper</h6>
            <input
              type="text"
              required
              id="team2player11"
              name="team2player11"
              value=""
              style="width: 100%; padding: 5px; box-sizing: border-box;"
            />
          </div>
        </div>
        <div style="text-align: center; padding: 20px;">
          <input
            style="width: 200px; height: 60px; font-size: 24px;"
            type="submit"
            value="Let's Play"
          />
        </div>                                                                                                                                                                                                             </form>
    </div>
    <script>
      function storeOrDisplayTeams() {
        var teams = window.localStorage.getItem("teams");
        if (teams) {
          teams = JSON.parse(teams);
          Object.keys(teams).forEach(function (team) {
            document.getElementById(`${team}`).value = teams[team].name;
            Object.keys(teams[team].players).forEach(function (player) {
              document.getElementById(`${team}${player}`).value =
                teams[team].players[player];
            });
          });
        } else {
          window.localStorage.setItem(
            "teams",
            JSON.stringify({
              team1: {
                name: "Real Madrid ALL LEGENDS",
                players: {
                  player1: "Ronaldo",
                  player2: "C. Ronaldo",
                  player3: "E. Hazard",
                  player4: "Z. Zidane",
                  player5: "Toni Kross",
                  player6: "Casemiro",
                  player7: "Roberto Carlos",
                  player8: "Carvajal",
                  player9: "Sergio Ramos",
                  player10: "Alaba",
                  player11: "Iker Casillas"
                }
              },
              team2: {
                name: "Barcelona ALL LEGENDS",
                players: {
                  player1: "Suarez",
                  player2: "Messi",
                  player3: "Neymar",
                  player4: "Xavi",
                  player5: "Iniesta",
                  player6: "Busquest",
                  player7: "Jordi Alba",
                  player8: "Dani Alves",
                  player9: " G. Pique",
                  player10: "Puyol",
                  player11: "Ter Stegen"
                }
              }
            })
          );

          storeOrDisplayTeams();
        }
      }

      function storeTeamAndStartPlay(ev) {
        ev.preventDefault();
        // Store current form values
        // Teams and Players

        var teams = {};

        ["team1", "team2"].forEach(function (team) {
          teams[team] = {
            name: document.getElementById(`${team}`).value,
            players: {}
          };
          for (var i = 1; i <= 11; i++) {
            teams[team].players["player" + i] = document.getElementById(
              `${team}player${i}`
            ).value;
          }
        });

        window.localStorage.setItem("teams", JSON.stringify(teams));
        location.href = "startGame.html";
      }

      storeOrDisplayTeams();
    </script>
  </body>
</html>